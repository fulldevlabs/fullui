---
import type { ComponentProps, HTMLTag, Polymorphic } from 'astro/types'
import Component from '../_Component.astro'
import Icon from './Icon.astro'

type Props<As extends HTMLTag = 'div'> = Polymorphic<{ as: As }> &
  ComponentProps<typeof Component> & {
    color?: 'base' | 'brand'
    value?: number | string
    size?: string
    compact?: boolean
  }

const { size, compact, value, ...rest } = Astro.props
---

<Component
  class:list={['rating']}
  {...rest}
>
  {
    Array.from(Array(Number(value) || 1), (_, index) => (
      <Icon
        size={size}
        compact={compact}
        name="star-filled"
        key={index}
      />
    ))
  }
</Component>

<style is:global lang="scss">
  @import '../../css/utils.scss';

  @include component('rating') {
    display: flex;
    gap: 0.75rem;
    padding-left: 5px;

    &.center {
      padding-left: 0 !important;
    }
  }
</style>
