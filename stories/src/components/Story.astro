---
import StoryComponent from './StoryComponent.astro'
import StoryDetails from './StoryDetails.astro'
import StoryField from './StoryField.astro'

const { ...rest } = Astro.props

console.log(rest)
---

<div class="story">
  <div class="component">
    <StoryComponent {...rest.props} />
  </div>

  <div class="details">
    <StoryDetails name={rest.props.component} />
  </div>

  <div class="inputs">
    {
      Object.entries(rest).map(([key, value]) => {
        return (
          <StoryField
            {key}
            {value}
          />
        )
      })
    }
  </div>
</div>

<script is:inline>
  function updateUrl() {
    window.location.href =
      '/?component=' +
      document.getElementById('component').value +
      '&variant=' +
      document.getElementById('color').value +
      '&html=' +
      document.getElementById('html').value +
      '&name=' +
      document.getElementById('name').value +
      '&placeholder=' +
      document.getElementById('placeholder').value +
      '&rows=' +
      document.getElementById('rows').value +
      '&src=' +
      document.getElementById('src').value +
      '&size=' +
      document.getElementById('size').value +
      '&type=' +
      document.getElementById('type').value +
      '&variant=' +
      document.getElementById('variant').value
  }
</script>

<style>
  .story {
    width: 100%;
    max-height: 96vh;
    overflow: auto;
  }

  .content {
    display: flex;
    justify-content: center;
    align-items: center;
    margin: 10px 10px 0 10px;
    border: 2px solid var(--6);
    border-radius: var(--radius-2);
    background-image: radial-gradient(
      circle,
      var(--8) 1px,
      rgba(0, 0, 0, 0) 1px
    );
    background-size: 40px 40px;
    background-color: var(--2);
    padding: 20px;
    height: 395px;
    overflow: auto;
    resize: both;

    img {
      max-width: 250px;
      max-height: 350px;
    }
  }

  .details {
    padding: 20px;

    b {
      text-transform: capitalize;
    }
  }
</style>
